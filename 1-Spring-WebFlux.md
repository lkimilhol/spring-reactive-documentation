버전 5.3.23

이 문서에서는 Netty, Underow 및 Servlet 3.1+ 컨테이너와 같은 비블로킹 서버에서 실행할 수 있도록 Reactive Streams API를 기반으로 구축된 Reactive-Stack 웹 애플리케이션 지원에 대해 설명합니다. 개별 장에서는 Spring WebFlux 프레임워크, 대응형 WebClient, 테스트 지원 및 대응형 라이브러리를 다룹니다. 서블릿 스택 웹 응용 프로그램의 경우 서블릿 스택의 웹을 참조하십시오.

1. Spring WebFlux

스프링 프레임워크, 스프링 웹 MVC에 포함된 원래의 웹 프레임워크는 서블릿 API 및 서블릿 컨테이너 용으로 제작되었습니다. 리액티브 스택 웹 프레임워크인 스프링 웹플럭스는 버전 5.0 이후에서 추가 되었습니다. 리액티스 스트림즈 백 프레셔를 지원하며 네티, 언더토우 및 서블릿 3.1+ 컨테이너와 같은 서버에서 실행 됩니다.

이 두가지 웹 프레임워크는 소스 모듈의 이름을 미러링하고 스프링 프레임워크에 나란히 존재합니다. 각 모듈은 선택 사항입니다. 응용 프로그램은 하나 또는 다른 모듈을 사용하거나 경우에 따라 둘 다 사용할 수 있습니다. 예를 들어, 리액티브 웹클라이언트가 있는 스프링 MVC 컨트롤러 입니다.
-> 스프링 MVC 컨트롤러 내에서도 리액티브 웹 클라이어트가 사용 가능하다.

1.1 개요

왜 스프링 웹플럭스가 만들어졌을까요?

정답은 적은 수의 스레드로 동시서을 처리하고, 더 적은 하드웨어 리소스로 확장이 가능한 논블락킹 웹스택의 필요성 입니다. 서블릿 3.1은 논블록킹 I/O API를 지원했었습니다. 그러나, 이것을 사용하는 것은 동기 또는 블락킹 서블릿 API의 rest와 거리가 멉니다. 이것은 새로운 공통 API를 제공하는 동기가 되었습니다. 이것은 비동기, 논블락킹에 잘 설립된 서버 때문에 중요합니다. (예를 들어 Netty)

또 다른 답은 함수형 프로그래밍입니다. 자바5의 어노테이션이 기회를 만든것처럼(어노테이션이 있는 REST 컨트롤로나, 단위 테스트 등) 자바8의 람다 표현식은 자바에서 함수형 API를 위한 기회를 만들었습니다. 이는 논블록킹 애플리케이션, 연속적인 스타일 API(CompletableFuture 그리고 ReactiveX에 의해 알려짐)에 요긴합니다. 프로그래밍 모델 수준에서 자바8은 스프링 웹플럭스가 주석이 어노테이션이 달린 컨트롤러와 함께 기능적인 웹 엔드포인트를 제공 할 수 있게 하였습니다.

1.1.1 "Reactive" 정의

우리는 논블록킹, 함수형에 언급했습니다. 근데 리액티브의 의미는 무엇일까요?

리액티브의 용어는, 리액팅으로 변화되는 프로그래밍 모델을 (I/O 리액팅 이벤트 네트워크 요소, 마우스 이벤트 리액팅 UI 컨트롤러 등) 가르킵니다. 그런 의미로 논블락킹은 블락된 것 대신에 작업이 완료되거나 데이터를 사용할 수 있게 되기 때문에 리액팅입니다.

여기엔 또다른 중요한 메커니즘이 있는데, 스프링 팀은 리액티브 논블락킹 백프레셔와 연관이 있습니다. 동기식 명령형 코드에서 블락킹 콜은 호출자가 대기하도록 자연스러운 형태로 백프레셔 역할을 합니다. 논블록킹 코드에서는 제작자가 목적지를 압도하지 않도록 이벤트 발생률을 조절하는 것이 중요해집니다.

리액티브 스트림즈는 백프레셔를 동반한 비동기 사이의 컴포넌트를 정의한 작은 스펙입니다. 예를들어 데이터 레포지토리(퍼블리셔 역할)는 HTTP 서버(섭스크라이버 역할)가 응답에 쓸 수 있는 데이터를 생성 할 수 있습니다. 리액티브 스트림즈의 주된 목저은 얼마나 빠르고, 느리게 퍼블리셔가 데이터를 프로듀스 하는지 입니다. 